{#
/**
 * @file
 * Theme override for a filter caption.
 *
 * Returns HTML for a captioned image, audio, video or other tag.
 *
 * Available variables
 * - string node: The complete HTML tag whose contents are being captioned.
 * - string tag: The name of the HTML tag whose contents are being captioned.
 * - string caption: The caption text.
 * - string classes: The classes of the captioned HTML tag.
 *
 * NOTE: This template was taken from the core Bartik/Classy theme. Without it, the
 * media captions were not being displayed.
 */
#}

{#
  We need to know the view mode (full or medium) of the media in the <figure> element so we can
  appropriately set the width of this container. 
#}
{% set viewmode = "" %}
{% if 'data-view-mode="medium"' in node|render %}
{% set viewmode = "medium" %}
{% elseif 'data-view-mode="full"' in node|render %}
{% set viewmode = "medium" %}
{% elseif 'data-view-mode="narrow"' in node|render %}
{% set viewmode = "narrow" %}
{% endif %}

<figure role="group" class="caption caption-{{ tag }}{%- if classes %} {{ classes }}{%- endif %} {% if viewmode %} embedded-{{ viewmode }}{% endif %}">
  {{ node }}
  <figcaption>{{ caption }}</figcaption>
</figure>

